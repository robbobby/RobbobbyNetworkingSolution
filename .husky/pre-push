#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push validation..."

# Run integration tests (skip if no tests available)
echo "ğŸ”— Running integration tests..."
if dotnet test --filter Category=Integration --verbosity minimal 2>/dev/null; then
    echo "âœ… Integration tests completed successfully!"
else
    echo "âš ï¸  No integration tests found - continuing with validation"
fi

# Run performance benchmarks (skip if no tests available)
echo "âš¡ Running performance benchmarks..."
if dotnet test --filter Category=Benchmark --verbosity minimal 2>/dev/null; then
    echo "âœ… Benchmark tests completed successfully!"
else
    echo "âš ï¸  No benchmark tests found - continuing with validation"
fi

echo "ğŸ”¨ Building solution in Release mode..."
dotnet build --configuration Release

echo "ğŸ“¦ Validating package builds..."
dotnet pack --configuration Release --no-build --verbosity minimal

echo "âœ… Pre-push validation completed successfully!"
